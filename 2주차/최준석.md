## 3장: 타입과 추상화

### 3.1 추상화를 통한 복잡성 극복

**추상화의 정의**

- 현실의 복잡성을 극복하기 위한 도구
- 불필요한 부분을 무시하고 중요한 부분만 강조해서 단순하게 만드는 것
- 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이 목적

**추상화의 두 가지 차원**

1. **일반화**: 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 것
2. **세부사항 제거**: 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거하는 것

**예시: 지하철 노선도**

- 과거: 실제 지형과 역 위치를 정확히 표현 → 복잡하고 역 간의 관계 파악 어려움
- 현재: 지리적 정확성을 버리고 승객이 필요한 역 간의 연결 관계만 표현
- 목적에 맞는 효과적인 추상화의 결과

### 3.2 객체지향과 추상화

**개념(Concept)이란?**

- 공통점을 기반으로 객체들을 묶기 위한 그릇
- 객체들의 복잡성을 극복하기 위한 추상화 도구
- 개념을 이용해 객체를 여러 그룹으로 분류할 수 있음

**개념의 세 가지 구성요소**

1. **심볼(Symbol)**: 개념을 가리키는 간략한 이름 또는 명칭
2. **내연(Intension)**: 개념의 완전한 정의, 객체가 개념에 속하는지 여부를 판단하는 기준
3. **외연(Extension)**: 개념에 속하는 모든 객체들의 집합

**예시: 이상한 나라의 앨리스**

- 앨리스가 정원에서 만난 정원사, 병사, 하트 여왕, 왕을 모두 '트럼프'로 분류
- 이들 간의 유사성을 하나로 묶어서 추상화한 것
- 분류를 통해 복잡한 현실을 단순화

### 3.3 타입

**타입과 개념의 관계**

- 타입은 개념과 동일함
- 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념
- 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 함

**타입의 핵심**

- 타입은 데이터가 어떻게 사용되느냐에 관한 것
- 어떤 데이터에 어떤 연산자를 적용할 수 있느냐가 그 데이터의 타입을 결정
- 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰짐

**분류의 중요성**

- 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정
- 적절한 분류: 유지보수 용이, 변경에 유연한 애플리케이션
- 부적절한 분류: 유지보수 어려움, 변화에 쉽게 대처하지 못함

### 3.4 타입의 계층

**동적 모델 vs 정적 모델**

- **스냅샷**: 객체가 특정 시점에 구체적으로 어떤 상태를 가지는지를 나타냄
- **타입 모델**: 객체가 가질 수 있는 모든 상태와 행동을 시간에 독립적으로 표현
- 동적 모델과 정적 모델을 적절히 혼용해서 사용해야 함

**일반화와 특수화**

- 트럼프 인간의 행동은 트럼프의 행동을 모두 포함하고 추가적인 행동도 가짐
- 트럼프: Super Type, 트럼프 인간: Sub Type
- 일반화-특수화 관계를 통해 타입 계층을 구성

### 3.5 정적 모델

**클래스와 타입**

- 타입은 객체를 분류하기 위한 틀
- 클래스는 타입을 구현하는 한 가지 방법
- 정적인 모델은 클래스를 이용해 구현

**타입의 목적**

- 시간에 따라 동적으로 변하는 객체의 복잡성을 극복
- 상태에 독립적인 정적인 모습으로 객체를 다룰 수 있게 함
- 추상화를 통해 복잡성을 단순화

---

## 4장: 역할, 책임, 협력

### 4.1 협력

**협력의 시작**

- 한 객체가 다른 객체에게 도움을 요청할 때 시작
- 요청을 받은 객체는 지식이나 서비스를 제공함으로써 요청에 응답
- 다수의 연쇄적인 요청과 응답의 흐름으로 구성

**예시: 이상한 나라의 재판 (하트 잭의 재판)**

- 왕 → 하얀 토끼(전령관): 증인을 부르라 요청
- 하얀 토끼 → 모자 장수: 증언을 요청
- 모자 장수 → 왕: 증언으로 응답
- 연쇄적인 요청과 응답을 통한 협력

**협력과 객체**

- 중요한 것은 개별 객체가 아니라 객체들 사이에 이뤄지는 협력
- 협력이 자리를 잡으면 저절로 객체의 행동이 드러나고 적절한 객체의 상태가 결정

### 4.2 책임

**책임의 정의**

- 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나 적절한 행동을 할 의무가 있는 경우
- 객체가 무엇을 알고 있는가(knowing)와 무엇을 할 수 있는가(doing)로 구성

**책임의 분류**

1. **아는 것(knowing)**

   - 사적인 정보에 관해 아는 것
   - 관련된 객체에 관해 아는 것
   - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

2. **하는 것(doing)**
   - 객체를 생성하거나 계산하는 등의 스스로 하는 것
   - 다른 객체의 행동을 시작시키는 것
   - 다른 객체의 활동을 제어하고 조절하는 것

**책임과 메시지**

- 한 객체가 다른 객체에게 전송한 요청은 그 요청을 수신한 객체의 책임이 수행되게 함
- 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것을 메시지 전송이라고 함

### 4.3 역할

**역할의 개념**

- 어떤 협력에 참여하는 특정한 객체가 협력에서 차지하는 책임이나 임무
- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합

**역할의 특징**

1. **여러 객체가 동일한 역할을 수행할 수 있다**

   - 역할은 대체 가능성을 의미
   - 각 객체는 책임을 수행하는 방법을 자율적으로 선택

2. **역할은 대체 가능성을 의미한다**

   - 동일한 역할을 수행하는 객체들은 서로 대체 가능
   - 협력 안에서 역할을 대체할 수 있는 객체들은 동일한 메시지를 이해할 수 있어야 함

3. **각 객체는 책임을 수행하는 방법을 자율적으로 선택할 수 있다**

   - 동일한 요청에 대해 서로 다른 방식으로 응답 가능
   - 다형성의 개념적 기반

4. **하나의 객체가 동시에 여러 역할을 수행할 수 있다**
   - 객체는 여러 협력에 동시에 참여할 수 있음
   - 각 협력에서 서로 다른 역할을 담당할 수 있음

### 4.4 객체지향 설계 기법

**책임-주도 설계(Responsibility-Driven Design)**

- 협력에 필요한 책임들을 식별하고 적절한 객체에게 책임을 할당하는 방식
- 시스템의 기능을 더 작은 책임으로 분할하고 각 책임을 수행할 적절한 객체를 찾음

**디자인 패턴(Design Pattern)**

- 반복적으로 발생하는 문제와 그 문제에 대한 해법의 쌍
- 공통으로 사용되는 역할, 책임, 협력의 템플릿

**테스트-주도 개발(Test-Driven Development)**

- 실패하는 테스트를 작성하고, 테스트를 통과하는 가장 간단한 코드를 작성하는 방식
- 테스트가 객체가 수행해야 하는 책임에 대한 간접적인 명세 역할

### 4.5 객체지향 설계

**설계의 핵심**

- 적절한 객체에게 적절한 책임을 할당하는 것
- 객체들 간의 협력 관계를 구축하는 것
- 메시지를 통한 느슨한 결합을 유지하는 것

**객체의 자율성**

- 객체는 자신의 상태를 스스로 관리해야 함
- 외부에서는 객체의 인터페이스를 통해서만 상호작용
- 구현이 아닌 인터페이스에 의존해야 함

**변경에 유연한 설계**

- 책임이 잘 분리된 객체들로 구성
- 각 객체가 자신의 책임에만 집중
- 협력을 통해 더 큰 책임을 완수

## 질문

1. 지하철 노선도처럼 '무엇을 버리고 무엇을 남길지' 고민했던 추상화 사례가 있는지
2. 객체에게 책임을 할당할 때, '이게 이 객체가 할 일인가?' 고민했던 순간이 있었는지
3. 객체지향 초보자들이 '객체의 행동과 상태부터 고민하는 실수'를 한다고 하는데, 각자 새로운 기능을 설계할 때 어떤 순서로 생각하는지
